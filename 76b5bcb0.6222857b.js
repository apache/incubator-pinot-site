/*! For license information please see 76b5bcb0.6222857b.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{132:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return s})),t.d(n,"metadata",(function(){return u})),t.d(n,"rightToc",(function(){return p})),t.d(n,"default",(function(){return m}));var a=t(1),r=t(6),o=(t(0),t(170)),i=t(175),l=t(177),c=t(178),s={title:"Querying Pinot",sidebar_label:"query-pinot",description:"Ways to query Pinot"},u={id:"user-guide/query-pinot",title:"Querying Pinot",description:"Ways to query Pinot",source:"@site/docs/user-guide/query-pinot.md",permalink:"/docs/user-guide/query-pinot",editUrl:"https://github.com/apache/incubator-pinot/edit/master/website/docs/user-guide/query-pinot.md",sidebar_label:"query-pinot"},p=[{value:"REST API on the Broker",id:"rest-api-on-the-broker",children:[]},{value:"Query Console",id:"query-console",children:[{value:"pinot-admin",id:"pinot-admin",children:[]}]},{value:"Pinot Clients",id:"pinot-clients",children:[]}],d={rightToc:p},b="wrapper";function m(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(o.b)(b,Object(a.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"rest-api-on-the-broker"},"REST API on the Broker"),Object(o.b)("p",null,"Pinot can be queried via a broker endpoint as follows. This example assumes broker is running on ",Object(o.b)("inlineCode",{parentName:"p"},"localhost:8099")),Object(o.b)(l.a,{block:!0,defaultValue:"Standard-SQL endpoint",urlKey:"arch",values:[{label:"Standard-SQL endpoint",value:"Standard-SQL endpoint"},{label:"PQL endpoint",value:"PQL endpoint"}],mdxType:"Tabs"},Object(o.b)(c.a,{value:"Standard-SQL endpoint",mdxType:"TabItem"},Object(o.b)("p",null,"The Pinot REST API can be accessed by invoking POST operation with a JSON body containing the parameter sql to the ",Object(o.b)("inlineCode",{parentName:"p"},"/query/sql")," endpoint on a broker."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),'$ curl -H "Content-Type: application/json" -X POST \\\n   -d \'{"sql":"select foo, count(*) from myTable group by foo limit 100"}\' \\\n   http://localhost:8099/query/sql\n'))),Object(o.b)(c.a,{value:"PQL endpoint",mdxType:"TabItem"},Object(o.b)(i.a,{type:"info",mdxType:"Alert"}," This endpoint is deprecated, and will soon be removed. The standard-SQL endpoint is the recommended endpoint."),Object(o.b)("p",null,"The PQL endpoint can be accessed by invoking POST operation with a JSON body containing the parameter pql to the ",Object(o.b)("inlineCode",{parentName:"p"},"/query")," endpoint on a broker."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),'$ curl -H "Content-Type: application/json" -X POST \\\n   -d \'{"pql":"select count(*) from myTable group by foo top 100"}\' \\\n   http://localhost:8099/query\n')))),Object(o.b)("h2",{id:"query-console"},"Query Console"),Object(o.b)("p",null,"Query Console can be used for running ad-hoc queries (checkbox available to query the PQL endpoint). The Query Console can be accessed by entering the ",Object(o.b)("inlineCode",{parentName:"p"},"<controller host>:<controller port>")," in your browser"),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"../../static/img/pql/pql-query-console.png",alt:"PQL-Query-Console"}))),Object(o.b)("h3",{id:"pinot-admin"},"pinot-admin"),Object(o.b)("p",null,"You can also query using the pinot-admin scripts. Make sure you follow instructions in Getting Pinot to get Pinot locally, and then"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'cd incubator-pinot/pinot-tools/target/pinot-tools-pkg \nbin/pinot-admin.sh PostQuery \\\n  -queryType sql \\\n  -brokerPort 8000 \\\n  -query "select count(*) from baseballStats"\n\n2020/03/04 12:46:33.459 INFO [PostQueryCommand] [main] Executing command: PostQuery -brokerHost localhost -brokerPort 8000 -queryType sql -query select count(*) from baseballStats\n2020/03/04 12:46:33.854 INFO [PostQueryCommand] [main] Result: {"resultTable":{"dataSchema":{"columnDataTypes":["LONG"],"columnNames":["count(*)"]},"rows":[[97889]]},"exceptions":[],"numServersQueried":1,"numServersResponded":1,"numSegmentsQueried":1,"numSegmentsProcessed":1,"numSegmentsMatched":1,"numConsumingSegmentsQueried":0,"numDocsScanned":97889,"numEntriesScannedInFilter":0,"numEntriesScannedPostFilter":0,"numGroupsLimitReached":false,"totalDocs":97889,"timeUsedMs":185,"segmentStatistics":[],"traceInfo":{},"minConsumingFreshnessTimeMs":0}\n')),Object(o.b)("h2",{id:"pinot-clients"},"Pinot Clients"),Object(o.b)("p",null,"Here's a list of the clients available to query Pinot from your application"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/user-guide/clients/golang"}),"Java client")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/user-guide/clients/java"}),"Go client")),Object(o.b)("li",{parentName:"ul"},"Coming soon - JDBC client")))}m.isMDXComponent=!0},170:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return p}));var a=t(0),r=t.n(a),o=r.a.createContext({}),i=function(e){var n=r.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},l=function(e){var n=i(e.components);return r.a.createElement(o.Provider,{value:n},e.children)};var c="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},u=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===n.indexOf(a)&&(t[a]=e[a]);return t}(e,["components","mdxType","originalType","parentName"]),u=i(t),p=a,d=u[l+"."+p]||u[p]||s[p]||o;return t?r.a.createElement(d,Object.assign({},{ref:n},c,{components:t})):r.a.createElement(d,Object.assign({},{ref:n},c))}));function p(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},171:function(e,n,t){var a;!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var a=arguments[n];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=r.apply(null,a);i&&e.push(i)}else if("object"===o)for(var l in a)t.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(n,[]))||(e.exports=a)}()},175:function(e,n,t){"use strict";var a=t(0),r=t.n(a),o=t(171),i=t.n(o);t(94);n.a=function({children:e,classNames:n,fill:t,icon:a,type:o}){let l=null;switch(o){case"danger":l="alert-triangle";break;case"success":l="check-circle";break;case"warning":l="alert-triangle";break;default:l="info"}return r.a.createElement("div",{className:i()(n,"alert",`alert--${o}`,{"alert--fill":t,"alert--icon":!1!==a}),role:"alert"},!1!==a&&r.a.createElement("i",{className:i()("feather",`icon-${a||l}`)}),e)}},177:function(e,n,t){"use strict";var a=t(0),r=t.n(a),o=t(171),i=t.n(o),l=t(95),c=t.n(l);const s={left:37,right:39};n.a=function(e){const{block:n,children:t,defaultValue:o,values:l}=e,[u,p]=Object(a.useState)(o),d=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:i()("tabs",{"tabs--block":n})},l.map(({value:e,label:n})=>r.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":u===e,className:i()("tab-item",c.a.tabItem,{"tab-item--active":u===e}),key:e,ref:e=>d.push(e),onKeyDown:e=>((e,n,t)=>{switch(t.keyCode){case s.right:((e,n)=>{const t=e.indexOf(n)+1;e[t]?e[t].focus():e[0].focus()})(e,n);break;case s.left:((e,n)=>{const t=e.indexOf(n)-1;e[t]?e[t].focus():e[e.length-1].focus()})(e,n)}})(d,e.target,e),onFocus:()=>p(e),onClick:()=>p(e)},n))),r.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(t).filter(e=>e.props.value===u)[0]))}},178:function(e,n,t){"use strict";var a=t(0),r=t.n(a);n.a=function(e){return r.a.createElement("div",null,e.children)}}}]);