/*! For license information please see f0c930b7.18f2618e.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{158:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return m}));var o=n(1),r=n(6),a=(n(0),n(170)),u=n(175),i={title:"Java",sidebar_label:"java",description:"Pinot Java Client"},l={id:"user-guide/clients/java",title:"Java",description:"Pinot Java Client",source:"@site/docs/user-guide/clients/java.md",permalink:"/docs/user-guide/clients/java",editUrl:"https://github.com/apache/incubator-pinot/edit/master/website/docs/user-guide/clients/java.md",sidebar_label:"java"},s=[],c={rightToc:s},p="wrapper";function m(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)(p,Object(o.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"The java client can be found in pinot-clients/pinot-java-client. Here's an example of how to use the pinot-java-client to query Pinot."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'import org.apache.pinot.client.Connection;\nimport org.apache.pinot.client.ConnectionFactory;\nimport org.apache.pinot.client.Request;\nimport org.apache.pinot.client.ResultSetGroup;\nimport org.apache.pinot.client.ResultSet;\n\n/**\n * Demonstrates the use of the pinot-client to query Pinot from Java\n */\npublic class PinotClientExample {\n\n  public static void main(String[] args) {\n\n    // pinot connection\n    String zkUrl = "localhost:2181";\n    String pinotClusterName = "PinotCluster";\n    Connection pinotConnection = ConnectionFactory.fromZookeeper(zkUrl + "/" + pinotClusterName);\n  \n    String query = "SELECT COUNT(*) FROM myTable GROUP BY foo";\n\n    // set queryType=sql for querying the sql endpoint\n    Request pinotClientRequest = new Request("sql", query);\n    ResultSetGroup pinotResultSetGroup = pinotConnection.execute(pinotClientRequest);\n    ResultSet resultTableResultSet = pinotResultSetGroup.getResultSet(0);\n\n    int numRows = resultTableResultSet.getRowCount();\n    int numColumns = resultTableResultSet.getColumnCount();\n    String columnValue = resultTableResultSet.getString(0, 1);\n    String columnName = resultTableResultSet.getColumnName(1);\n\n    System.out.println("ColumnName: " + columnName + ", ColumnValue: " + columnValue);\n  }\n}\n')),Object(a.b)("p",null,"Connections to Pinot are created using the ConnectionFactory class' utility methods to create connections to a Pinot cluster given a Zookeeper URL, a Java Properties object or a list of broker addresses to connect to."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'Connection connection = ConnectionFactory.fromZookeeper\n  ("some-zookeeper-server:2191/zookeeperPath");\n\nConnection connection = ConnectionFactory.fromProperties("demo.properties");\n\nConnection connection = ConnectionFactory.fromHostList\n  ("some-server:1234", "some-other-server:1234", ...);\n')),Object(a.b)("p",null,"Queries can be sent directly to the Pinot cluster using the ",Object(a.b)("inlineCode",{parentName:"p"},"Connection.execute(org.apache.pinot.client.Request)")," and ",Object(a.b)("inlineCode",{parentName:"p"},"Connection.executeAsync(org.apache.pinot.client.Request)")," methods of Connection:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'ResultSetGroup resultSetGroup =\n  connection.execute(new Request("sql", "select * from foo..."));\n// OR\nFuture<ResultSetGroup> futureResultSetGroup =\n  connection.executeAsync(new Request("sql", "select * from foo..."));\n')),Object(a.b)("p",null,"Queries can also use a ",Object(a.b)("inlineCode",{parentName:"p"},"PreparedStatement")," to escape query parameters:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'PreparedStatement statement =\n    connection.prepareStatement(new Request("sql", "select * from foo where a = ?"));\nstatement.setString(1, "bar");\n\nResultSetGroup resultSetGroup = statement.execute();\n// OR\nFuture<ResultSetGroup> futureResultSetGroup = statement.executeAsync();\n')),Object(a.b)("p",null,"Results can be obtained with the various get methods in the first ResultSet, obtained through the getResultSet(int) method:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'Request request = new Request("sql", "select foo, bar from baz where quux = \'quuux\'");\nResultSetGroup resultSetGroup = connection.execute(request);\nResultSet resultTableResultSet = pinotResultSetGroup.getResultSet(0);\n\nfor (int i = 0; i < resultSet.getRowCount(); ++i) {\n  System.out.println("foo: " + resultSet.getString(i, 0));\n  System.out.println("bar: " + resultSet.getInt(i, 1));\n}\n')),Object(a.b)(u.a,{type:"info",mdxType:"Alert"}," The examples for the sections below this note, are for querying the PQL endpoint, which is deprecated and will be deleted soon. For more information about the 2 endpoints, visit [Querying Pinot](/docs/user-guide/query-pinot)."),Object(a.b)("p",null,"If queryFormat pql is used in the Request,  there are some differences in how the results can be accessed, depending on the query.\nIn the case of aggregation, each aggregation function is within its own ResultSet. A query with multiple aggregation function will return one result set per aggregation function, as they are computed in parallel."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'ResultSetGroup resultSetGroup =\n    connection.execute(new Request("pql", "select max(foo), min(foo) from bar"));\n\nSystem.out.println("Number of result groups:" +\n    resultSetGroup.getResultSetCount(); // 2, min(foo) and max(foo)\nResultSet resultSetMax = resultSetGroup.getResultSet(0);\nSystem.out.println("Max foo: " + resultSetMax.getInt(0));\nResultSet resultSetMin = resultSetGroup.getResultSet(1);\nSystem.out.println("Min foo: " + resultSetMin.getInt(0));\n')),Object(a.b)("p",null,"In case of aggregation group by, there will be as many ResultSets as the number of aggregations, each of which will contain multiple results grouped by a group key."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'ResultSetGroup resultSetGroup =\n    connection.execute(\n        new Request("pql", "select min(foo), max(foo) from bar group by baz"));\n\nSystem.out.println("Number of result groups:" +\n    resultSetGroup.getResultSetCount(); // 2, min(foo) and max(foo)\n\nResultSet minResultSet = resultSetGroup.getResultSet(0);\nfor(int i = 0; i < minResultSet.length(); ++i) {\n    System.out.println("Minimum foo for " + minResultSet.getGroupKeyString(i, 1) +\n        ": " + minResultSet.getInt(i));\n}\n\nResultSet maxResultSet = resultSetGroup.getResultSet(1);\nfor(int i = 0; i < maxResultSet.length(); ++i) {\n    System.out.println("Maximum foo for " + maxResultSet.getGroupKeyString(i, 1) +\n        ": " + maxResultSet.getInt(i));\n}\n')))}m.isMDXComponent=!0},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p}));var o=n(0),r=n.n(o),a=r.a.createContext({}),u=function(e){var t=r.a.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},i=function(e){var t=u(e.components);return r.a.createElement(a.Provider,{value:t},e.children)};var l="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},c=Object(o.forwardRef)((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,l=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&-1===t.indexOf(o)&&(n[o]=e[o]);return n}(e,["components","mdxType","originalType","parentName"]),c=u(n),p=o,m=c[i+"."+p]||c[p]||s[p]||a;return n?r.a.createElement(m,Object.assign({},{ref:t},l,{components:n})):r.a.createElement(m,Object.assign({},{ref:t},l))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,u=new Array(a);u[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[l]="string"==typeof e?e:o,u[1]=i;for(var p=2;p<a;p++)u[p]=n[p];return r.a.createElement.apply(null,u)}return r.a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},171:function(e,t,n){var o;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var u=r.apply(null,o);u&&e.push(u)}else if("object"===a)for(var i in o)n.call(o,i)&&o[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()},175:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(171),u=n.n(a);n(94);t.a=function({children:e,classNames:t,fill:n,icon:o,type:a}){let i=null;switch(a){case"danger":i="alert-triangle";break;case"success":i="check-circle";break;case"warning":i="alert-triangle";break;default:i="info"}return r.a.createElement("div",{className:u()(t,"alert",`alert--${a}`,{"alert--fill":n,"alert--icon":!1!==o}),role:"alert"},!1!==o&&r.a.createElement("i",{className:u()("feather",`icon-${o||i}`)}),e)}}}]);